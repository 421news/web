{{!< default}}

<html>
  <head>
    {{> "global-head"}}
    <title>421 | Technomagic for real life</title>
    <link href="{{asset "css/index.css"}}" rel="stylesheet" type="text/css">
    <link href="{{asset "css/file-browser.css"}}" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div class="page-wrapper">
      {{> "general-styling"}}
      {{> "site-nav-en"}}
      <main>
        <!-- FEATURED POST -->
        {{> "index-featured-post" en="en" languageFilter="'hash-en'"}}

        <!-- HIGHLIGHTED POSTS -->
        {{> "index-highlighted-posts-en"}}

        <!-- FILE BROWSER NAVIGATION -->
        <div class="global-container pt-small pb-small">
          {{> "file-browser-en"}}
        </div>

        <!-- LAST POSTS -->
        {{> "last-posts-en"}}

        <!-- WIKI -->
        {{!-- {{> "wiki-section-en"}} --}}
      </main>

      {{> "site-footer" lang="en"}}

    </div>
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6669c61faddc5cdc1cf55c96" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="{{asset "js/audio-effect.js"}}"></script>
    <script src="{{asset "js/hide-show-nav.js"}}"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const readDiv = document.getElementById("read-div");
        const coverTags = document.getElementById("cover-tags");

        const urlPathname = window.location.pathname;

        if (urlPathname.includes("en")) {
          readDiv.textContent = "Read";
          coverTags.style = "display: none;"
        } else {
          readDiv.textContent = "Leer";
          coverTags.style = "display: block;"
        }
      })
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const modeSwitchButton = document.getElementById("mode-switch");
        const bodyElement = document.querySelector("body");
        const sunIcon = modeSwitchButton.querySelector('.is-sun');
        const moonIcon = modeSwitchButton.querySelector('.is-moon');

        // Check and apply the user's preference from localStorage
        if (localStorage.getItem("lightMode") === "enabled") {
          bodyElement.classList.add("light-mode");
          moonIcon.style.display = 'none';
          sunIcon.style.display = 'block';
          updateDivBorders("#121212");
        } else {
          bodyElement.classList.remove("light-mode");
          moonIcon.style.display = 'block';
          sunIcon.style.display = 'none';
          updateDivBorders("");
        }

        modeSwitchButton.addEventListener("click", function(e) {
          e.preventDefault();

          bodyElement.classList.toggle("light-mode");
          if (bodyElement.classList.contains("light-mode")) {
              sunIcon.style.display = 'block';
              moonIcon.style.display = 'none';
              localStorage.setItem("lightMode", "enabled");
              updateDivBorders("#121212");
          } else {
              sunIcon.style.display = 'none';
              moonIcon.style.display = 'block';
              localStorage.setItem("lightMode", "disabled");
              updateDivBorders("");
          }
        });

        function updateDivBorders(color) {
          document.querySelectorAll("div").forEach(function(div) {
            div.style.borderColor = color;
          });
        }
      });
    </script>
  </body>
</html>