{{!< default}}

<div class="page-wrapper">
  {{> "general-styling"}} <!-- TODO: Revisar -->
  {{> "site-nav-es"}}
  <main>
    <h1 class="sr-only">421 — Información de calidad para tu dieta cognitiva</h1>
    <!-- FEATURED POST -->
    <div class="hero-desktop">
      {{> "index-featured-post" languageFilter="-'hash-en'"}}
    </div>
    <div class="hero-mobile">
      {{> "index-featured-post-mobile" languageFilter="-'hash-en'"}}
    </div>

    <!-- POPULAR POSTS -->
    {{> "index-highlighted-posts-es"}}

    <!-- FILE BROWSER NAVIGATION -->
    <div class="global-container pt-small pb-small">
      {{> "file-browser"}}
    </div>

    <!-- LAST POSTS -->
    {{> "last-posts-es"}}
  </main>

  {{> "site-footer"}}

</div>
<script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6669c61faddc5cdc1cf55c96" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous" defer></script>
<script src="{{asset "js/audio-effect.js"}}" defer></script>
<script src="{{asset "js/pagination-home.js"}}" defer></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const readDiv = document.getElementById("read-div");
    const urlPathname = window.location.pathname;

    if (urlPathname.includes("en")) {
      readDiv.textContent = "Read";
    } else {
      readDiv.textContent = "Leer";
    }
  })
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const dropdownContainer = document.querySelector('.dropdown-container');
    const dropdownToggle = document.querySelector('.dropdown-toggle');
    const dropdownMenu = document.querySelector('.dropdown-menu');
    let isOpen = false;
    let hoverTimeout;

    dropdownToggle.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();

      if (isOpen) {
        closeDropdown();
      } else {
        openDropdown();
      }
    });

    dropdownContainer.addEventListener('mouseenter', function() {
      clearTimeout(hoverTimeout);
      openDropdown();
    });

    dropdownContainer.addEventListener('mouseleave', function() {
      hoverTimeout = setTimeout(() => {
        closeDropdown();
      }, 200);
    });

    document.addEventListener('click', function(e) {
      if (!dropdownContainer.contains(e.target)) {
        closeDropdown();
      }
    });

    document.addEventListener('keydown', function(e) {
      if (e.key === "Escape" && isOpen) {
        closeDropdown();
      }
    });

    function openDropdown() {
      isOpen = true;
      dropdownContainer.classList.add('active');

      const firstItem = dropdownMenu.querySelector('.dropdown-item');
      if (firstItem) {
        firstItem.focus();
      }
    }

    function closeDropdown() {
      isOpen = false;
      dropdownContainer.classList.remove('active')
    }

    // Smooth scroll effect for dropdown items
    const dropdownItems = document.querySelectorAll('.dropdown-item');
    dropdownItems.forEach(item => {
      item.addEventListener('click', function(e) {
        // Add a nice click effect
        this.style.transform = 'scale(0.95)';
        setTimeout(() => {
          this.style.transform = "";
        }, 150);
      });
    });
  })
</script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const urlPathname = window.location.pathname;

    // Update mobile hero texts
    const readButton = document.getElementById("hero-mobile-read-button");
    const subscribeButton = document.getElementById("hero-mobile-subscribe-button");
    const authorPrefix = document.getElementById("hero-mobile-author-prefix");

    if (urlPathname.includes("en")) {
      if (readButton) {
        readButton.textContent = "Read article →";
      }
      if (subscribeButton) {
        subscribeButton.style.display = "none";
      }
      if (authorPrefix) {
        authorPrefix.textContent = "By";
      }
    } else {
      if (readButton) {
        readButton.textContent = "Leer nota →";
      }
      if (subscribeButton) {
        subscribeButton.textContent = "Suscribite";
      }
      if (authorPrefix) {
        authorPrefix.textContent = "Por";
      }
    }
  });
</script>
