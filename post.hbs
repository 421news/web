{{!< default}}

<head>
  {{> "global-head"}}
  <title>{{meta_title}}</title>
  <meta name="description" content="{{excerpt}}">
  <link href="{{asset "css/index.css"}}" rel="stylesheet" type="text/css">
  <link href="{{asset "css/progress-bar.css"}}" rel="stylesheet" type="text/css">
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "NewsArticle",
      "headline": {{title}},
      "image": [{{feature_image}}],
      "datePublished": {{date published_at}},
      "author": [{
        "@type": "Person",
        "name": {{primary_author.name}},
      }]
    }
  </script>
</head>
<body>
  {{#post}}
    {{#has tag="#en"}}
      {{> "post-en"}}
    {{else}}
      {{> "post-es"}}
    {{/has}}
  {{/post}}

  <!-- Suscribite button mobile  -->
  <a href="/suscribite" style="color: white; text-decoration: none;">
    <button class="button sub-mobile-button">
      Suscribite
    </button>
  </a>
  
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6669c61faddc5cdc1cf55c96" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="{{asset "js/hide-show-nav.js"}}"></script>
  <script src="{{asset "js/reading-progress.js"}}"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const englishMeta = document.querySelector('meta[name="english-version"]');
      const spanishMeta = document.querySelector('meta[name="spanish-version"]');

      if (englishMeta) {
        const slug = englishMeta.getAttribute('content');
        const linkContainer = document.getElementById('translation-link');
        if (slug) {
          linkContainer.innerHTML = `<a href="/en/${slug}" class="btn-translate">Read it in english.</a>`;
        }
      }

      if (spanishMeta) {
        const slug = spanishMeta.getAttribute('content');
        const linkContainer = document.getElementById('translation-link');
        if (slug) {
          linkContainer.innerHTML = `<a href="/${slug}" class="btn-translate">Leer en espa√±ol.</a>`;
        }
      }
    });
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const modeSwitchButton = document.getElementById("mode-switch");
      const bodyElement = document.querySelector("body");
      const sunIcon = modeSwitchButton.querySelector('.is-sun');
      const moonIcon = modeSwitchButton.querySelector('.is-moon');

      // Check and apply the user's preference from localStorage
      if (localStorage.getItem("lightMode") === "enabled") {
        bodyElement.classList.add("light-mode");
        moonIcon.style.display = 'none';
        sunIcon.style.display = 'block';
        updateDivBorders("#121212");
      } else {
        bodyElement.classList.remove("light-mode");
        moonIcon.style.display = 'block';
        sunIcon.style.display = 'none';
        updateDivBorders("");
      }

      modeSwitchButton.addEventListener("click", function(e) {
        e.preventDefault();

        bodyElement.classList.toggle("light-mode");
        if (bodyElement.classList.contains("light-mode")) {
            sunIcon.style.display = 'block';
            moonIcon.style.display = 'none';
            localStorage.setItem("lightMode", "enabled");
            updateDivBorders("#121212");
        } else {
            sunIcon.style.display = 'none';
            moonIcon.style.display = 'block';
            localStorage.setItem("lightMode", "disabled");
            updateDivBorders("");
        }
      });

      function updateDivBorders(color) {
        document.querySelectorAll("div").forEach(function(div) {
          div.style.borderColor = color;
        });
      }
    });
  </script>
  {{!-- <script>
    document.addEventListener('DOMContentLoaded', function() {
    const copyButton = document.getElementById('copy-link-button');
    
    copyButton.addEventListener('click', function() {
      // Get the current page URL
      const currentUrl = window.location.href;
      
      // Create a temporary input element
      const tempInput = document.createElement('input');
      tempInput.value = currentUrl;
      document.body.appendChild(tempInput);
      
      // Select the input content
      tempInput.select();
      tempInput.setSelectionRange(0, 99999); // For mobile devices
      
      // Copy the content
      document.execCommand('copy');
      
      // Remove the temporary input
      document.body.removeChild(tempInput);
      
      // Provide user feedback
      alert('Link copiado, gracias por difundir!');
    });

    // Add keyboard support
    copyButton.addEventListener('keydown', function(event) {
      if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        copyButton.click();
      }
    });
  });
  </script> --}}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const featImg = document.querySelector('.post-featimg');
      if (featImg) {
        const bgImg = new Image();
        bgImg.onload = function() {
          featImg.classList.add('loaded');
        }
        const style = window.getComputedStyle(featImg);
        const bgUrl = style.backgroundImage.slice(4, -1).replace(/["']/g, "");
        bgImg.src = bgUrl;
      }
    })
  </script>
</body>