{{!< default}}

{{#post}}
  {{#has tag="#en"}}
    {{> "post-en"}}
  {{else}}
    {{> "post-es"}}
  {{/has}}
{{/post}}

<script src="{{asset "js/reading-progress.js"}}" defer></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const englishMeta = document.querySelector('meta[name="english-version"]');
    const spanishMeta = document.querySelector('meta[name="spanish-version"]');

    if (englishMeta) {
      const slug = englishMeta.getAttribute('content');
      const linkContainer = document.getElementById('translation-link');
      if (slug) {
        linkContainer.innerHTML = '<a href="/en/' + slug + '" class="btn-translate">Read it in english.</a>';
      }
    }

    if (spanishMeta) {
      const slug = spanishMeta.getAttribute('content');
      const linkContainer = document.getElementById('translation-link');
      if (slug) {
        linkContainer.innerHTML = '<a href="/es/' + slug + '" class="btn-translate">Leer en espa√±ol.</a>';
      }
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const featImg = document.querySelector('.post-featimg');
    if (featImg) {
      const bgImg = new Image();
      bgImg.onload = function() {
        featImg.classList.add('loaded');
      }
      const style = window.getComputedStyle(featImg);
      const bgUrl = style.backgroundImage.slice(4, -1).replace(/["']/g, "");
      bgImg.src = bgUrl;
    }
  })
</script>
