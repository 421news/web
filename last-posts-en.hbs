{{!< default}}

<meta property="og:title" content="Last posts | 421">
<meta property="og:description" content="The complete archive of 421 posts. Filter by author, topic, or date.">
<meta property="og:image" content="https://www.421.news/content/images/2024/09/GXnmmH3WgAABx7l-1.jpg">
<meta property="og:url" content="https://www.421.news/en/last-posts/">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Last posts | 421">
<meta name="twitter:description" content="The complete archive of 421 posts. Filter by author, topic, or date.">
<meta name="twitter:image" content="https://www.421.news/content/images/2024/09/GXnmmH3WgAABx7l-1.jpg">

  <div class="page-wrapper">
    {{> "general-styling"}}
    {{> "site-nav-en"}}
    <main class="global-container" style="margin-bottom: 50px;">
      <h1 style="margin-top: 120px;">Last posts</h1>

      <div class="filter-bar" id="filter-bar">
        <select id="filter-author" class="filter-select">
          <option value="">Author</option>
        </select>
        <select id="filter-tag" class="filter-select">
          <option value="">Tag</option>
        </select>
        <select id="filter-order" class="filter-select">
          <option value="published_at desc">Newest first</option>
          <option value="published_at asc">Oldest first</option>
        </select>
      </div>

      <div class="last-posts-section" id="posts-grid">
        {{#get "posts"
            include="tags,authors"
            filter="tag:'hash-en'"
            order="published_at desc"
            limit="20"
            as |articles|
        }}
            {{#if articles}}
                {{#foreach articles}}
                    {{> "post-card"}}
                {{/foreach}}
            {{/if}}
        {{/get}}
      </div>

      <button
          class="button"
          id="load-more-posts"
          style="display: block; margin: auto; margin-top: 50px;"
      >
          Load more
      </button>
    </main>

    <!-- FILE BROWSER NAVIGATION -->
    <div class="global-container pt-small pb-small">
      {{> "file-browser-en"}}
    </div>
    {{> "site-footer" lang="en"}}

  </div>
  <script src="{{asset "js/filter-posts.js"}}" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const dropdownContainer = document.querySelector('.dropdown-container');
      const dropdownToggle = document.querySelector('.dropdown-toggle');
      const dropdownMenu = document.querySelector('.dropdown-menu');
      let isOpen = false;
      let hoverTimeout;

      dropdownToggle.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();

        if (isOpen) {
          closeDropdown();
        } else {
          openDropdown();
        }
      });

      dropdownContainer.addEventListener('mouseenter', function() {
        clearTimeout(hoverTimeout);
        openDropdown();
      });

      dropdownContainer.addEventListener('mouseleave', function() {
        hoverTimeout = setTimeout(() => {
          closeDropdown();
        }, 200);
      });

      document.addEventListener('click', function(e) {
        if (!dropdownContainer.contains(e.target)) {
          closeDropdown();
        }
      });

      document.addEventListener('keydown', function(e) {
        if (e.key === "Escape" && isOpen) {
          closeDropdown();
        }
      });

      function openDropdown() {
        isOpen = true;
        dropdownContainer.classList.add('active');

        const firstItem = dropdownMenu.querySelector('.dropdown-item');
        if (firstItem) {
          firstItem.focus();
        }
      }

      function closeDropdown() {
        isOpen = false;
        dropdownContainer.classList.remove('active')
      }

      // Smooth scroll effect for dropdown items
      const dropdownItems = document.querySelectorAll('.dropdown-item');
      dropdownItems.forEach(item => {
        item.addEventListener('click', function(e) {
          // Add a nice click effect
          this.style.transform = 'scale(0.95)';
          setTimeout(() => {
            this.style.transform = "";
          }, 150);
        });
      });
    })
  </script>
